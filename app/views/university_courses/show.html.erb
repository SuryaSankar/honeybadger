<% content_for :mathjax_scripts do %>
<%= render partial: 'partials/mathjax_include' %>
<% end %>
<% content_for :prettify_scripts do %>
<%= render partial: 'partials/prettify_include' %>
<% end %>
<% content_for :pagewise_heading do %>
	<%= @university_course.course_code+" - "+@university_course.course.name %>
<% end %>
<% content_for :navbar_breadcrumbs do %>
<ul class="nav">
	  <li><%= link_to root_path  do %>Home &nbsp;&nbsp;<i class="icon-double-angle-right"></i><%end %></li>
<li><%= link_to '#' do %><%= @university_course.full_course_name %> &nbsp;&nbsp;<i class="icon-double-angle-right"></i><% end %></li>
	</ul>
<% end %>



<div class="row">
<div class="bordered-box">
            <div class="heading"><h4>Question Papers</h4></div>
	    <div class="bordered-box-content">
		<% qpapers = @university_course.qpapers %>
		<% if qpapers.length > 0 then %>
		<ol>
		<% qpapers.each do |qp| %>
		<li>
		<%= link_to qp.title+" "+qp.month+" "+qp.year.to_s, qpaper_path(qp.id) %>
		</li>
		<% end %>
		</ol>
		<% else %>
		There are no question papers yet for this course.
		<% end %>
<div id="underlined-h5"><h5>Upload a question paper</h5></div>
<%= bootstrap_flash %>
<%= simple_form_for :qpaper_file, :url => qpaper_files_path, :html => { :multipart => true } do |form| %>
  <%= form.file_field :uploaded_file %>
  <%= form.input :university_course_id, :as => :hidden, :input_html => { :value => @university_course.id } %>
  <%= submit_tag "Upload", class: "btn btn-success" %>
<% end %>
	    </div>
</div>
</div>




<div class="row">
<div class="bordered-box">
            <div class="heading"><h4>Questions</h4></div>
	    <div class="bordered-box-content">
<p><h5> <%= link_to "Add a question" , new_question_path+"?course="+@university_course.course_id.to_s %> </h5></p>
<h5>Questions obtained from question papers</h5>
		<% questions = Question.joins(:examquestions).where(course_id: @university_course.course_id).where(standalone: false).order('examquestions.mark ASC').group_by { |q| q.examquestions.first.mark } %>
		<% questions.keys.each do |mark| %>
		<h6><%= mark %> Marks</h6>
		<ol>
		<% questions[mark].each do |q| %>
		 <li><%= link_to (q.qtitle || q.qtext), question_path(q.id) %></li>
		<% end %>
		</ol>
		<% end %>
<%# render partial: "partials/questions", locals: { questions: @program_university_course.university_course.course.questions } %>
	    </div>
</div>
</div>

<% if admin_signed_in? then %>

<div class="form-actions">
  <%= link_to t('.back', :default => t("helpers.links.back")),
              university_courses_path, :class => 'btn'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
              edit_university_course_path(@university_course), :class => 'btn' %>
  <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              university_course_path(@university_course),
              :method => 'delete',
              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
              :class => 'btn btn-danger' %>
</div>
<% end %>
